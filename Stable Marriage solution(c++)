#include <iostream>
#include <cmath>
using namespace std;

bool ok(int q[], int c){
	static int mp[3][3] = {{0,2,1},{0,2,1},{1,2,0}};
	static int wp[3][3] = {{2,1,0},{0,1,2},{2,0,1}};
	for(int i = 0; i < c; i++){
			if(q[c] == q[i])
				return false;
	}
	for(int j = 0; j < 3; j++){
		for(int i = 0; i < 3; i++){
			 if(j == i){ 
				continue;
			}
			if(mp[j][q[i]] < mp[j][q[j]]){
				if(wp[q[i]][j] < wp[q[j]][j]){
					return false;
				}
			}
			 if(mp[i][q[j]] < mp[j][j]){
				if(wp[q[j]][i] < wp[q[j]][i]){
					return false;
				}
			}
		}
	
	}
	return true;
}
void print(int q[]) {
   static int solution = 0;
   cout << "Solution #" << ++solution << ":\nMan\tWoman\n";
   for (int i = 0; i < 3; ++i)
      cout << i << "\t" << q[i] << "\n";
   cout << "\n";
}
		

int main(){
	int q[3] = {}, c = 0;
	
	q[0] = 0;

	while(c >= 0){
		q[c++];
		if(c == 3){
			print(q);
			q[c--];
		}
		else{
			q[c] = -1;
		}
		while(c >= 0){
			q[c]++;
			if(q[c] == 3){
				q[c--];
			}
			else if(ok(q,c)){
				break;
			}
		}
	}
return 0;
}



